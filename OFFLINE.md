**অফলাইন নির্দেশিকা (Offline behavior overview)**

এই প্রোজেক্টে সার্ভিস ওয়ার্কার বা ক্যাশিং নিয়ম পরিবর্তন ছাড়া ছোট, নিরাপদ পরিবর্তনগুলো করা হয়েছে — যেমন অফলাইনে থাকা অবস্থায় একটি ইন-অ্যাপ সতর্কতা/ব্যানার দেখানো। নিচে সংক্ষেপে কী অফলাইনে কাজ করবে, কী কাজ করবে না, এবং কিভাবে টেস্ট করবেন তা লেখা আছে।

**কি অফলাইনে কাজ করবে (যদি কনটেন্ট আগে লোড করা থাকে)**
- `public`-এ থাকা סט্যাটিক JSON (যেমন: `public/gojol/*.json`) কেশে থাকলে দেখানো যাবে।
- কুরআন/হাদিস পেজ ও যেগুলো আগে লোড করা হয়েছে এমন কন্টেন্ট (যেগুলো প্রিলোড/কেশে আছে) দেখানো যাবে।
- ইউজারের লোকাল সেটিংস/ফেভারিট (IndexedDB/localStorage) অ্যাক্সেস করা যাবে।
- যদি আগে ডাউনলোড করে রাখা থাকে (Cache Storage বা IndexedDB), তাহলে লোকাল অডিও প্লে করা যাবে।

**কি কাজ করবে না**
- YouTube iframe ভিডিও স্ট্রিমিং অফলাইনে কাজ করবে না।
- লাইভ/রিয়েল-টাইম API (যেমন প্রেয়ার টাইম API, AI সার্ভিস) অনলাইনে ছাড়া কাজ করবে না যদি না আগে কনটেন্ট কেশ করা থাকে।

**কী পরিবর্তন করা হয়েছে (service worker ছাড়া)**
- `src/components/layout/OfflineIndicator.tsx` আপডেট করা হয়েছে — এখন অফলাইনে থাকলে একটি persistent ব্যানার দেখা যায় যতক্ষণ না ব্যবহারকারী "বন্ধ করুন" করে বা অনলাইনে ফিরে আসে।
- কোনো সার্ভিস ওয়ার্কার কনফিগ বা runtime caching পরিবর্তন করা হয়নি।

**কিভাবে টেস্ট করবেন (local)**
1. `npm run build` করে প্রোডাকশন বানান তৈরি করুন।
2. একটি সিম্পল সার্ভার চালান (উদাহরণ Windows PowerShell):

```powershell
npm run build
npx serve dist
```

3. ব্রাউজারে অ্যাপ খুলুন (http://localhost:5000 বা `serve` যে পোর্ট দেখায়)।
4. DevTools → Network → Offline সিলেক্ট করে পেজ রিলোড করুন — persistent offline ব্যানার দেখা যাবে।
5. DevTools → Network → Online করে আবার রিলোড করলে ব্যানার অদৃশ্য হবে।

**কখন সার্ভিস-ওয়ার্কার পরিবর্তন দরকার হবে**
- যদি আপনি চান যে বড় অডিও ফাইল স্বয়ংক্রিয়ভাবে প্রিফেচ/কেশ করা হোক, অথবা প্লেলিস্ট JSON-এ স্বাধীন ক্যাশ নীতি প্রয়োগ করতে চান — তখন `vite-plugin-pwa` বা Workbox runtime caching পরিবর্তন প্রয়োজন।
- সার্ভিস-ওয়ার্কার পরিবর্তন করার আগে ডেভ/প্রোড কন্ডিশনগুলো আলাদা রাখা উচিত যাতে ডেভ-টেস্টিং সহজ হয়।

**রোলব্যাক**
- এই পরিবর্তনগুলো non-destructive — গিট-কমিট হিসেবে আলাদা করা আছে; সহজে revert করা যাবে যদি প্রয়োজনে আগের অবস্থায় ফিরে যেতে চান।

যদি চান, আমি পরবর্তীতে service-worker কনফিগ নিয়ে কাজ করবো — আপনি অনুমোদন দিলে ধাপে ধাপে যোগ করবো এবং প্রতিটি ধাপ টেস্ট রিপোর্ট দেব।
